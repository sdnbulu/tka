<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TKA 2026 KORWIL SELOGIRI</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0; 
            color: #333;
            /* === KODE BACKGROUND GAMBAR SEKOLAH YANG SUDAH DIKOREKSI === */
            background-image: url('1759273432364.jpg'); /* **Jalur dikoreksi** */
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
            background-attachment: fixed; 
            /* ===================================== */
        }
        /* Tambahkan overlay hitam semi-transparan untuk meningkatkan keterbacaan teks */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.1); /* Hitam transparan 10% */
            z-index: -1; /* Pastikan di belakang konten */
        }
        .container {
            max-width: 600px;
            margin: 50px auto; 
            background-color: rgba(255, 255, 255, 0.98); /* Transparansi putih ditingkatkan */
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); /* Bayangan lebih kuat */
        }
        h1, h2 {
            color: #007bff;
            text-align: center;
        }
        h1 {
            color: #dc3545;
            font-size: 2em;
            margin-bottom: 20px;
        }
        
        #login-page, #quiz-page, #result-page {
            border: 1px solid #ddd;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
        }
        .question-card {
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .options label {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid #eee;
        }
        .options label:hover:not(.disabled) {
            background-color: #e9ecef;
        }
        input[type="radio"] {
            margin-right: 10px;
            pointer-events: none; 
        }
        
        .options label.correct-feedback {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
            font-weight: bold;
        }
        .options label.incorrect-feedback {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        .options label.disabled {
            cursor: default;
            pointer-events: none; 
        }

        button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #218838;
        }
        #next-button, #submit-button {
            background-color: #007bff;
            margin-top: 30px;
            display: none;
        }
        #next-button:hover, #submit-button:hover {
            background-color: #0056b3;
        }
        input[type="text"] {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .result-item {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .correct-final {
            background-color: #d4edda;
            color: #155724;
        }
        .incorrect-final {
            background-color: #f8d7da;
            color: #721c24;
        }
        .correct-answer {
            font-weight: bold;
            color: #28a745;
        }
        #login-page, #quiz-page, #result-page {
            display: none;
        }
        #login-page {
            display: block;
        }
        #progress-bar {
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
            color: #6c757d;
        }
        #final-score-display {
            font-size: 3.5em; 
            font-weight: bold;
            color: #28a745; 
            display: block;
            margin: 10px 0 20px 0;
            text-align: center;
            border: 3px solid #d4edda;
            padding: 15px;
            border-radius: 10px;
            background-color: #f0fff0;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>TKA 2026 KORWIL SELOGIRI</h1>
    <div id="login-page">
        <h2>Halaman Login Peserta</h2>
        <label for="student-name">Nama Lengkap:</label>
        <input type="text" id="student-name" placeholder="Masukkan nama Anda" required>
        
        <label for="student-school">Asal Sekolah:</label>
        <input type="text" id="student-school" placeholder="Masukkan asal sekolah Anda" required>
        
        <button onclick="startQuiz()">Mulai Kuis</button>
    </div>

    <div id="quiz-page">
        <h2 id="progress-bar"></h2>
        <div id="question-area" class="question-card">
        </div>
        
        <button id="next-button" onclick="nextQuestion()">Lanjut &raquo;</button>
        <button id="submit-button" onclick="submitQuiz()">Selesai & Lihat Hasil</button>
    </div>

    <div id="result-page">
        <h2>Hasil Tes</h2>
        <p>Nama: <span id="res-name"></span></p>
        <p>Asal Sekolah: <span id="res-school"></span></p>

        <div id="final-score-display">
            <span id="score-display"></span>
        </div>
        
        <p style="text-align: center; font-weight: bold;">(Jumlah Jawaban Benar: <span id="correct-count"></span> dari 20)</p>
        
        <h3>Kunci Jawaban dan Pembahasan</h3>
        <div id="result-details">
            </div>
        <button onclick="location.reload()" style="background-color: #007bff;">Ulangi Tes</button>
    </div>

    <form id="submission-form" 
          action="https://formsubmit.co/darminssr@gmail.com" 
          method="POST" 
          style="display:none;">
        
        <input type="text" name="Nama_Siswa" id="form-nama">
        <input type="text" name="Asal_Sekolah" id="form-sekolah">
        <input type="number" name="Skor_Akhir" id="form-skor">
        <input type="number" name="Jumlah_Benar" id="form-benar">
        
        <input type="hidden" name="_subject" value="Hasil Kuis TKA Korwil Selogiri">
        <input type="hidden" name="_next" value="https://sdnbulu.github.io/tka/"> 
        <input type="hidden" name="_template" value="table">
    </form>
    </div>

<script>
    const questions = [
        { q: "<p style='text-align: justify; font-style: italic;'>Daur hidup kupu-kupu dimulai dari telur yang diletakkan di atas daun. Setelah beberapa hari, telur akan menetas menjadi larva atau yang biasa kita sebut ulat. Ulat ini akan makan banyak daun untuk tumbuh besar. Setelah mencapai ukuran maksimal, ulat akan berubah menjadi kepompong (pupa). Di dalam kepompong inilah terjadi perubahan besar. Akhirnya, dari dalam kepompong akan keluar kupu-kupu dewasa yang indah.</p>1. Urutan daur hidup kupu-kupu yang benar berdasarkan teks di atas adalah...", a: ["Telur – Kepompong – Ulat – Kupu-kupu", "Ulat – Telur – Kepompong – Kupu-kupu", "**Telur – Ulat – Kepompong – Kupu-kupu**", "Kepompong – Telur – Ulat – Kupu-kupu"], correct: 2 },
        { q: "<p style='text-align: justify; font-style: italic;'>Daur hidup kupu-kupu dimulai dari telur yang diletakkan di atas daun. Setelah beberapa hari, telur akan menetas menjadi larva atau yang biasa kita sebut ulat. Ulat ini akan makan banyak daun untuk tumbuh besar. Setelah mencapai ukuran maksimal, ulat akan berubah menjadi kepompong (pupa). Di dalam kepompong inilah terjadi perubahan besar. Akhirnya, dari dalam kepompong akan keluar kupu-kupu dewasa yang indah.</p>2. Ikhtisar yang paling tepat untuk teks di atas adalah...", a: ["**Kupu-kupu berasal dari telur yang menetas menjadi ulat, kemudian menjadi kepompong sebelum akhirnya menjadi kupu-kupu dewasa.**", "Ulat adalah fase terpenting dalam daur hidup kupu-kupu karena ia makan sangat banyak.", "Kepompong adalah tempat ulat berubah menjadi kupu-kupu yang indah.", "Daur hidup kupu-kupu sangat panjang, dimulai dari telur hingga menjadi dewasa."], correct: 0 },
        { q: "<p style='text-align: justify; font-style: italic;'>Daur hidup kupu-kupu dimulai dari telur yang diletakkan di atas daun. Setelah beberapa hari, telur akan menetas menjadi larva atau yang biasa kita sebut ulat. Ulat ini akan makan banyak daun untuk tumbuh besar. Setelah mencapai ukuran maksimal, ulat akan berubah menjadi kepompong (pupa). Di dalam kepompong inilah terjadi perubahan besar. Akhirnya, dari dalam kepompong akan keluar kupu-kupu dewasa yang indah.</p>3. Bagian yang tepat untuk melengkapi bagan alur \"Telur -> ... -> Kepompong -> Kupu-kupu Dewasa\" adalah...", a: ["Kupu-kupu kecil", "**Ulat**", "Pupa", "Jentik-jentik"], correct: 1 },
        { q: "<p style='text-align: justify; font-style: italic;'>Pencemaran lingkungan dapat dibedakan menjadi tiga jenis utama. Pertama adalah pencemaran udara, yang biasanya disebabkan oleh asap kendaraan dan asap pabrik. Kedua, ada pencemaran air, yang sumber utamanya adalah limbah industri dan sampah rumah tangga yang dibuang ke sungai. Ketiga, pencemaran tanah, yang sering kali terjadi akibat penggunaan pestisida berlebihan di bidang pertanian dan penumpukan sampah plastik yang sulit terurai.</p>4. Informasi utama yang dibahas dalam teks tersebut adalah...", a: ["Akibat pencemaran lingkungan", "**Jenis-jenis pencemaran lingkungan dan penyebabnya**", "Cara mengatasi pencemaran lingkungan", "Bahaya asap pabrik dan pestisida"], correct: 1 },
        { q: "<p style='text-align: justify; font-style: italic;'>Pencemaran lingkungan dapat dibedakan menjadi tiga jenis utama. Pertama adalah pencemaran udara, yang biasanya disebabkan oleh asap kendaraan dan asap pabrik. Kedua, ada pencemaran air, yang sumber utamanya adalah limbah industri dan sampah rumah tangga yang dibuang ke sungai. Ketiga, pencemaran tanah, yang sering kali terjadi akibat penggunaan pestisida berlebihan di bidang pertanian dan penumpukan sampah plastik yang sulit terurai.</p>5. Kalimat ikhtisar yang paling baik untuk merangkum seluruh isi teks adalah...", a: ["Pencemaran lingkungan hanya disebabkan oleh asap pabrik dan sampah plastik.", "**Teks tersebut menjelaskan tiga jenis pencemaran lingkungan yaitu udara, air, dan tanah beserta penyebabnya masing-masing.**", "Pencemaran tanah akibat pestisida adalah jenis pencemaran yang paling berbahaya bagi lingkungan.", "Kita harus segera mengatasi pencemaran lingkungan dengan cara mengurangi penggunaan kendaraan."], correct: 1 },
        { q: "<p style='text-align: justify; font-style: italic;'>Pencemaran lingkungan dapat dibedakan menjadi tiga jenis utama. Pertama adalah pencemaran udara, yang biasanya disebabkan oleh asap kendaraan dan asap pabrik. Kedua, ada pencemaran air, yang sumber utamanya adalah limbah industri dan sampah rumah tangga yang dibuang ke sungai. Ketiga, pencemaran tanah, yang sering kali terjadi akibat penggunaan pestisida berlebihan di bidang pertanian dan penumpukan sampah plastik yang sulit terurai.</p>6. Berdasarkan bagan informasi dari teks, pasangan jenis pencemaran dan penyebabnya yang TIDAK sesuai adalah...", a: ["Pencemaran udara disebabkan oleh asap kendaraan.", "Pencemaran air disebabkan oleh limbah industri.", "Pencemaran tanah disebabkan oleh sampah plastik.", "**Pencemaran air disebabkan oleh penggunaan pestisida.**"], correct: 3 },
        { q: "<p style='text-align: justify; font-style: italic;'>Untuk membuat agar-agar, langkah pertama adalah mencampurkan bubuk agar-agar dengan gula dan air dalam sebuah panci. Setelah itu, aduk rata lalu masak di atas kompor dengan api sedang sambil terus diaduk hingga mendidih. Jika sudah mendidih, matikan api dan diamkan sejenak untuk mengurangi uap panas. Terakhir, tuang adonan ke dalam cetakan dan biarkan hingga dingin dan mengeras.</p>7. Ringkasan yang paling sesuai untuk teks prosedur di atas adalah...", a: ["Cara menuang agar-agar ke dalam cetakan yang benar.", "**Langkah-langkah memasak agar-agar mulai dari mencampur bahan, memasak, hingga mencetaknya.**", "Pentingnya mengaduk agar-agar saat dimasak agar tidak menggumpal.", "Bahan-bahan yang diperlukan untuk membuat agar-agar."], correct: 1 },
        { q: "<p style='text-align: justify; font-style: italic;'>Untuk membuat agar-agar, langkah pertama adalah mencampurkan bubuk agar-agar dengan gula dan air dalam sebuah panci. Setelah itu, aduk rata lalu masak di atas kompor dengan api sedang sambil terus diaduk hingga mendidih. Jika sudah mendidih, matikan api dan diamkan sejenak untuk mengurangi uap panas. Terakhir, tuang adonan ke dalam cetakan dan biarkan hingga dingin dan mengeras.</p>8. Setelah adonan agar-agar mendidih, langkah selanjutnya menurut teks adalah...", a: ["Langsung menuangnya ke cetakan", "Memasaknya lebih lama", "Menambahkan gula", "**Mematikan api dan mendiamkannya sejenak**"], correct: 3 },
        { q: "<p style='text-align: justify; font-style: italic;'>Untuk membuat agar-agar, langkah pertama adalah mencampurkan bubuk agar-agar dengan gula dan air dalam sebuah panci. Setelah itu, aduk rata lalu masak di atas kompor dengan api sedang sambil terus diaduk hingga mendidih. Jika sudah mendidih, matikan api dan diamkan sejenak untuk mengurangi uap panas. Terakhir, tuang adonan ke dalam cetakan dan biarkan hingga dingin dan mengeras.</p>9. Jika langkah-langkah pada teks diberi nomor: (1) Campurkan bahan, (2) Masak hingga mendidih, (3) Matikan api dan diamkan, (4) Tuang ke cetakan. Urutan bagan alur yang benar adalah...", a: ["**(1) -> (2) -> (3) -> (4)**", "(2) -> (1) -> (4) -> (3)", "(1) -> (3) -> (2) -> (4)", "(2) -> (4) -> (1) -> (3)"], correct: 0 },
        { q: "<p style='text-align: justify; font-style: italic;'>Rantai makanan di sawah dimulai dari padi yang berperan sebagai produsen. Padi dimakan oleh tikus, yang merupakan konsumen tingkat I. Selanjutnya, tikus dimakan oleh ular, yang berperan sebagai konsumen tingkat II. Terakhir, ular dimakan oleh elang, yang menjadi konsumen tingkat III atau konsumen puncak.</p>10. Ide pokok teks di atas adalah...", a: ["Kehidupan elang di sawah", "Peran padi sebagai produsen", "**Contoh rantai makanan di ekosistem sawah**", "Bahaya tikus bagi tanaman padi"], correct: 2 },
        { q: "<p style='text-align: justify; font-style: italic;'>Rantai makanan di sawah dimulai dari padi yang berperan sebagai produsen. Padi dimakan oleh tikus, yang merupakan konsumen tingkat I. Selanjutnya, tikus dimakan oleh ular, yang berperan sebagai konsumen tingkat II. Terakhir, ular dimakan oleh elang, yang menjadi konsumen tingkat III atau konsumen puncak.</p>11. Bentuk bagan alur rantai makanan yang sesuai dengan informasi pada teks adalah...", a: ["**Padi -> Tikus -> Ular -> Elang**", "Elang -> Ular -> Tikus -> Padi", "Padi -> Ular -> Tikus -> Elang", "Tikus -> Padi -> Elang -> Ular"], correct: 0 },
        { q: "<p style='text-align: justify; font-style: italic;'>Rantai makanan di sawah dimulai dari padi yang berperan sebagai produsen. Padi dimakan oleh tikus, yang merupakan konsumen tingkat I. Selanjutnya, tikus dimakan oleh ular, yang berperan sebagai konsumen tingkat II. Terakhir, ular dimakan oleh elang, yang menjadi konsumen tingkat III atau konsumen puncak.</p>12. Berdasarkan teks, yang berperan sebagai konsumen tingkat II adalah...", a: ["Padi", "Tikus", "**Ular**", "Elang"], correct: 2 },
        { q: "<p style='text-align: justify; font-style: italic;'>Gunung berapi memiliki beberapa bagian utama. Bagian paling bawah adalah dapur magma, tempat magma panas terkumpul. Ketika terjadi erupsi, magma akan naik melalui sebuah saluran yang disebut pipa kepundan. Puncak gunung tempat magma keluar disebut kawah. Material yang dikeluarkan saat erupsi bisa berupa lava (magma yang mengalir), awan panas, dan abu vulkanik.</p>13. Ringkasan yang paling tepat tentang proses keluarnya magma sesuai teks adalah...", a: ["Magma dari dapur magma langsung keluar melalui kawah tanpa melewati saluran apapun.", "**Magma dari dapur magma naik melalui pipa kepundan lalu keluar melalui kawah saat erupsi.**", "Lava dan awan panas berkumpul di dapur magma sebelum akhirnya meletus.", "Pipa kepundan adalah tempat magma dimasak hingga panas lalu dikeluarkan melalui kawah."], correct: 1 },
        { q: "<p style='text-align: justify; font-style: italic;'>Gunung berapi memiliki beberapa bagian utama. Bagian paling bawah adalah dapur magma, tempat magma panas terkumpul. Ketika terjadi erupsi, magma akan naik melalui sebuah saluran yang disebut pipa kepundan. Puncak gunung tempat magma keluar disebut kawah. Material yang dikeluarkan saat erupsi bisa berupa lava (magma yang mengalir), awan panas, dan abu vulkanik.</p>14. Berdasarkan bagan struktur gunung berapi dalam teks, bagian yang berfungsi sebagai saluran naiknya magma adalah...", a: ["Lava", "Abu vulkanik", "**Pipa kepundan**", "Dapur magma"], correct: 2 },
        { q: "<p style='text-align: justify; font-style: italic;'>Gunung berapi memiliki beberapa bagian utama. Bagian paling bawah adalah dapur magma, tempat magma panas terkumpul. Ketika terjadi erupsi, magma akan naik melalui sebuah saluran yang disebut pipa kepundan. Puncak gunung tempat magma keluar disebut kawah. Material yang dikeluarkan saat erupsi bisa berupa lava (magma yang mengalir), awan panas, dan abu vulkanik.</p>15. Material yang dikeluarkan saat gunung berapi erupsi, kecuali...", a: ["Lava", "**Air**", "Awan panas", "Abu vulkanik"], correct: 1 },
        { q: "<p style='text-align: justify; font-style: italic;'>Indonesia dikenal sebagai negara maritim karena wilayah perairannya lebih luas daripada daratannya. Posisi ini memberikan dua keuntungan utama. Secara ekonomi, laut Indonesia menjadi jalur perdagangan internasional yang strategis dan memiliki kekayaan hasil laut yang melimpah seperti ikan dan terumbu karang. Secara sosial budaya, laut menghubungkan berbagai suku bangsa di ribuan pulau, sehingga tercipta keragaman budaya yang unik.</p>16. Ikhtisar yang paling tepat untuk paragraf di atas adalah...", a: ["Indonesia memiliki laut yang sangat luas.", "**Posisi maritim Indonesia memberikan keuntungan ekonomi dari sisi perdagangan dan hasil laut, serta keuntungan sosial budaya dalam bentuk keragaman.**", "Laut Indonesia menjadi jalur perdagangan internasional yang sangat ramai.", "Keragaman budaya di Indonesia tercipta karena adanya laut."], correct: 1 },
        { q: "<p style='text-align: justify; font-style: italic;'>Indonesia dikenal sebagai negara maritim karena wilayah perairannya lebih luas daripada daratannya. Posisi ini memberikan dua keuntungan utama. Secara ekonomi, laut Indonesia menjadi jalur perdagangan internasional yang strategis dan memiliki kekayaan hasil laut yang melimpah seperti ikan dan terumbu karang. Secara sosial budaya, laut menghubungkan berbagai suku bangsa di ribuan pulau, sehingga tercipta keragaman budaya yang unik.</p>17. Berdasarkan bagan informasi pada teks, yang termasuk keuntungan posisi maritim Indonesia di bidang ekonomi adalah...", a: ["Jalur perdagangan dan keragaman budaya", "Kekayaan hasil laut dan menghubungkan antarsuku", "**Jalur perdagangan internasional dan kekayaan hasil laut**", "Keragaman budaya dan persatuan suku bangsa"], correct: 2 },
        { q: "<p style='text-align: justify; font-style: italic;'>Indonesia dikenal sebagai negara maritim karena wilayah perairannya lebih luas daripada daratannya. Posisi ini memberikan dua keuntungan utama. Secara ekonomi, laut Indonesia menjadi jalur perdagangan internasional yang strategis dan memiliki kekayaan hasil laut yang melimpah seperti ikan dan terumbu karang. Secara sosial budaya, laut menghubungkan berbagai suku bangsa di ribuan pulau, sehingga tercipta keragaman budaya yang unik.</p>18. Alasan utama Indonesia disebut sebagai negara maritim menurut teks adalah...", a: ["karena memiliki banyak gunung berapi", "karena memiliki hasil laut yang sangat melimpah", "**karena wilayah perairannya lebih luas daripada daratannya**", "karena menjadi jalur perdagangan internasional"], correct: 2 },
        { q: "<p style='text-align: justify; font-style: italic;'>Manfaat menabung ada banyak. Pertama, menabung melatih kita untuk hidup hemat dan tidak boros. Kedua, dengan memiliki tabungan, kita mempunyai dana darurat yang bisa digunakan untuk keperluan mendadak. Ketiga, menabung membantu kita untuk bisa membeli barang yang kita inginkan di masa depan tanpa harus berutang.</p>19. Berikut ini adalah rangkuman manfaat menabung yang disebutkan dalam teks, kecuali...", a: ["Melatih untuk hidup hemat", "Memiliki dana untuk keperluan darurat", "Membantu membeli barang yang diinginkan", "**Mendapatkan bunga yang besar dari bank**"], correct: 3 },
        { q: "<p style='text-align: justify; font-style: italic;'>Manfaat menabung ada banyak. Pertama, menabung melatih kita untuk hidup hemat dan tidak boros. Kedua, dengan memiliki tabungan, kita mempunyai dana darurat yang bisa digunakan untuk keperluan mendadak. Ketiga, menabung membantu kita untuk bisa membeli barang yang kita inginkan di masa depan tanpa harus berutang.</p>20. Kalimat yang paling tepat untuk dijadikan ikhtisar dari teks tersebut adalah...", a: ["Manfaat utama menabung adalah agar kita bisa membeli barang yang kita inginkan.", "Menabung adalah satu-satunya cara untuk melatih hidup hemat.", "**Menurut teks, menabung bermanfaat untuk melatih hemat, menyediakan dana darurat, dan membantu meraih keinginan.**", "Semua orang harus menabung agar memiliki dana darurat saat diperlukan."], correct: 2 }
    ];

    let currentQuestionIndex = 0;
    const userAnswers = new Array(questions.length).fill(null);

    function startQuiz() {
        const name = document.getElementById('student-name').value.trim();
        const school = document.getElementById('student-school').value.trim();

        if (name === "" || school === "") {
            alert("Nama dan Asal Sekolah harus diisi!");
            return;
        }

        document.getElementById('res-name').textContent = name;
        document.getElementById('res-school').textContent = school;

        document.getElementById('login-page').style.display = 'none';
        document.getElementById('quiz-page').style.display = 'block';
        
        currentQuestionIndex = 0; 
        displayQuestion(currentQuestionIndex);
    }

    function displayQuestion(index) {
        if (index >= questions.length) {
            submitQuiz();
            return;
        }
        
        const q = questions[index];
        const questionArea = document.getElementById('question-area');
        const questionNumber = index + 1;
        
        let optionsHtml = '';
        q.a.forEach((option, optionIndex) => {
            const optionChar = String.fromCharCode(65 + optionIndex); 
            optionsHtml += `
                <label for="q_opt_${optionIndex}" onclick="checkAnswer(${index}, ${optionIndex}, this)">
                    <input type="radio" name="current_q" id="q_opt_${optionIndex}" value="${optionIndex}">
                    ${optionChar}. ${option.replace(/\*\*/g, '')}
                </label>
            `;
        });

        questionArea.innerHTML = `
            <div>
                <p><strong>${q.q}</strong></p>
                <div class="options">
                    ${optionsHtml}
                </div>
            </div>
        `;
        
        document.getElementById('progress-bar').textContent = `Soal ${questionNumber} dari ${questions.length}`;

        document.getElementById('next-button').style.display = 'none';
        document.getElementById('submit-button').style.display = 'none';
    }

    function checkAnswer(qIndex, selectedIndex, selectedLabel) {
        if (userAnswers[qIndex] !== null) {
            return; 
        }

        document.querySelectorAll('#question-area label').forEach(label => {
            label.classList.add('disabled');
            label.onclick = null; 
        });

        userAnswers[qIndex] = selectedIndex;

        const isCorrect = selectedIndex === questions[qIndex].correct;
        const correctAnswerIndex = questions[qIndex].correct;

        if (isCorrect) {
            selectedLabel.classList.add('correct-feedback');
        } else {
            selectedLabel.classList.add('incorrect-feedback');
            
            const correctLabel = document.querySelector(`#question-area .options label:nth-child(${correctAnswerIndex + 1})`);
            if (correctLabel) {
                correctLabel.classList.add('correct-feedback');
            }
        }
        
        if (qIndex === questions.length - 1) {
            document.getElementById('submit-button').style.display = 'block';
        } else {
            document.getElementById('next-button').style.display = 'block';
        }
    }

    function nextQuestion() {
        currentQuestionIndex++;
        displayQuestion(currentQuestionIndex);
    }

    function submitQuiz() {
        let correctCount = 0; 
        const resultDetails = document.getElementById('result-details');
        resultDetails.innerHTML = '';

        questions.forEach((q, index) => {
            const userAnswerIndex = userAnswers[index];
            const isCorrect = userAnswerIndex === q.correct;
            
            if (isCorrect) {
                correctCount++;
            }

            const correctAnswerText = q.a[q.correct].replace(/\*\*/g, '');
            const resultClass = isCorrect ? 'correct-final' : 'incorrect-final';
            
            let userResponseText;
            if (userAnswerIndex !== null && userAnswerIndex >= 0) {
                 userResponseText = q.a[userAnswerIndex].replace(/\*\*/g, '');
            } else {
                 userResponseText = 'Tidak Dijawab';
            }


            resultDetails.innerHTML += `
                <div class="result-item ${resultClass}">
                    <p><strong>${index + 1}. ${q.q.replace(/<p.*?>.*?<\/p>/, '')}</strong></p>
                    <p>Jawaban Anda: **${userResponseText}** ${isCorrect ? '✅' : '❌'}</p>
                    <p>Jawaban Benar: <span class="correct-answer">${correctAnswerText}</span></p>
                </div>
            `;
        });

        const finalScore = correctCount * 5; 
        
        const studentName = document.getElementById('student-name').value.trim();
        const studentSchool = document.getElementById('student-school').value.trim();

        // ----------------------------------------------------
        // LOGIKA PENGIRIMAN DATA KE FORMSUBMIT
        // ----------------------------------------------------

        // 1. Isi Formulir Tersembunyi dengan data siswa dan skor
        document.getElementById('form-nama').value = studentName;
        document.getElementById('form-sekolah').value = studentSchool;
        document.getElementById('form-skor').value = finalScore;
        document.getElementById('form-benar').value = correctCount;

        // 2. Kirim Formulir secara otomatis
        // FormSubmit akan mengirim email ke alamat yang ada di atribut action form
        document.getElementById('submission-form').submit();
        
        // ----------------------------------------------------

        // Tampilkan hasil kepada siswa
        document.getElementById('score-display').textContent = finalScore;
        document.getElementById('correct-count').textContent = correctCount;

        document.getElementById('quiz-page').style.display = 'none';
        document.getElementById('result-page').style.display = 'block';
    }
</script>

</body>
</html>
